sudo: required
language: python
services:
- docker
before_install:
- pip install docker-compose
script:
- docker-compose build
- docker-compose up -d
- docker exec exemplofluxodocker_flapp_webapp_1 make test
- docker run -it --net host --pid host --cap-add audit_control -v /var/lib:/var/lib
  -v /var/run/docker.sock:/var/run/docker.sock -v /usr/lib/systemd:/usr/lib/systemd
  -v /etc:/etc --label docker_bench_security docker/docker-bench-security
after_success:
- docker login -u=$DOCKER_USER -p=$DOCKER_PASS
- if [ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_EVENT_TYPE" == "push" ]; then
  docker build -t $TRAVIS_REPO_SLUG .; docker push $TRAVIS_REPO_SLUG; fi
env:
  global:
  - secure: Cy0w4g9mlb4VGmLXlG9rtpow0kl3WnG0LnOntk8GCxEXgWa9XPVzpGRa2Nx+OBTa1JG6R5OYExcHoTjvnLEjCV8S1QT6vlq8yttmqEoNf+Ob7BmX2pILChRFDuyzL4wA1ZUH5MNwzVF9+R43T+imWtIjW+w7lbfowhxg7sJApq6YYZuF1YOrx3OzAB13+jZ+TI19c07mETR+43nrOjpyqSV3kbqfi/x1AKzwQPpyEtLD6xcCr4ETMupLwHdIlMDmUmYD00i1rN+pmFwkGu0SZaX79byz+4YLMOfvlG53e1sZnV7agc2CeQm/xQXwJypcHpbbysgK4lti8N3WyuM5COuzh+MIsCLrWy6NUSHMlW5HbVl5SHjNQIalQzaP0pQpkLqDbzv5sLR+njyHiVniQ8nHsNycK8paUJx1CNUJjPBriNZ5JtphJPfMswP6irUfH0NcRti1aaR0VSIgvxoI7r+ubAnI07sgsycZY8hGSpBDIspyurSw5dVXul8KJZEv2GPhQl/R8SUsVkIK/YxMsT4LAY2HnwjPgfl6ro+gnUYQaoFD38/oHgcrpa1lkoiG1K7MdBiCrk9KzqNdc1LingsszNWUrLnJh79Tb0F8DzA543sRPQH9fqvsYLzk1+Y7HZ5AkRGoDlJgol5b0qk6zWt6DfOnxceRzHAujn8IVco=
  - secure: T0Vh9b5JB96xe6qctQkj1jvGZeLmLn3586Qt/Z616c5I1sO1rQ7DIOryABMaVZqPggzSc3nw0DH9lOgyvw1EwHrtdfHr7YPzaUv+GvOuQMYeHWW/k+Ih6ncPQp/dCl4wiFu+n40WpJOBS8jJujtrKU7z3Pk6J+gvIfwBjd5vvWMSVBhOZ3zbVMQu9Or7CfGdYg79z9tuy99y+cFtF3ZjCt1mDvz3l42tcaryM1i9kpwO3eSiu8vPftylYvUrSMy3pbAGtOYAMvcqrssXkhGVTbMKZKWlVBNHWbG3aSghkJz3uwwm4PmFhvhc5jS5YfZ+JGi5M51m8jhLqsN5X7sVa1/1TlUjPNhAoaUg0K0gDwQF/wdG8Y0zpE+W+IOz4gc95dzbjRlSU1CXgYrwPg5bAgzW4ZYEytMZU1I+aHIuNvWYmhGnhWOAFaiBzX3HHe0u5xxdz3ekIFfh5B8iL5PiXLTOqtwttPghO4/JSxlte2Su/JXXKhDl4z+U3sFIzrt0tF2A1XRPCZd7DYgCJaaoZGXAwnKG4+QQpHbHTXol7mbgP7jawdEJia1T+cp4mhQLK2qRn0DnE5L5hh1D2b6IeJs2aPWbG0OxsvMZgak0ZiKnLwCcCKlx502HcopCdJvH42u9PflffE73jJaGJNqoXMnhlVxRuzBOVRAeIEThzz0=
